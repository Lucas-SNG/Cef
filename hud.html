<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>HUD Moderno - Ultra Reduzido</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: transparent;
            height: 100vh;
            font-family: "Poppins", Arial, sans-serif;
            color: #fff;
            overflow: hidden;
        }

        /* Logo central superior */
        .logo {
            text-align: center;
            margin-top: 15px;
        }

        .logo img {
            max-width: 160px;
        }

        /* HUD moderno (círculos) */
        .hud {
            position: absolute;
            top: 20px;
            right: 15px;
            display: flex;
            gap: 10px;
        }

        .hud-item {
            width: 50px;
            height: 50px;
            position: relative;
        }

        .circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                var(--color) calc(var(--value) * 1%),
                rgba(255, 255, 255, 0.1) 0
            );
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .circle::before {
            content: "";
            position: absolute;
            width: 40px;
            height: 40px;
            background: #101010;
            border-radius: 50%;
        }

        .circle-content {
            position: absolute;
            text-align: center;
            font-size: 9px;
            z-index: 2;
        }

        .circle-content img {
            width: 15px;
            height: 15px;
            display: block;
            margin: 0 auto 1px auto;
        }

        /* --- NOVO: Infos do Jogador --- */
        .player-info {
            position: absolute;
            top: 80px; /* Posicionado abaixo dos círculos */
            right: 15px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 4px;
            font-size: 13px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }

        .player-item {
            display: flex;
            align-items: center;
            padding: 3px 8px;
        }
        
        /* Estilos para os ícones Font Awesome e espaçamento */
        .player-item i {
            width: 14px;
            height: 14px;
            margin-right: 6px;
            text-align: center; /* Centraliza o ícone */
        }
        
        /* Cores personalizadas para os valores */
        #player-name .value { color: #FFFFFF; font-weight: 600; } 
        #player-id .value { color: #f0f8ff; font-size: 12px; }
        #player-cash .value { color: #FFFFFF; font-weight: 600; }
        /* -------------------------------------- */


        /* Infos inferior (Relógio e Versão) */
        .info {
            position: absolute;
            bottom: 0;
            right: 15px;
            padding: 6px 10px;
            font-size: 13px;
            text-align: center;
            line-height: 1.2;
        }

        .info span {
            display: block;
        }
    </style>
</head>
<body>
    <div class="logo">
        <img src="assets/img/logo.png" alt="Logo">
    </div>

    <div class="hud">
        <div class="hud-item" id="hud-vida">
            <div class="circle" style="--value:100; --color:#ff4d4d;">
                <div class="circle-content">
                    <img src="assets/img/vida.png" alt="Vida">
                    <span id="vidap">100%</span>
                </div>
            </div>
        </div>
        <div class="hud-item" id="hud-colete">
            <div class="circle" style="--value:100; --color:#00bfff;">
                <div class="circle-content">
                    <img src="assets/img/colete.png" alt="Colete">
                    <span id="coletep">100%</span>
                </div>
            </div>
        </div>
        <div class="hud-item">
            <div class="circle" style="--value:100; --color:#ffd633;">
                <div class="circle-content">
                    <img src="assets/img/fome.png" alt="Fome">
                    <span>100%</span>
                </div>
            </div>
        </div>
        <div class="hud-item">
            <div class="circle" style="--value:100; --color:#1aff66;">
                <div class="circle-content">
                    <img src="assets/img/sede.png" alt="Sede">
                    <span>100%</span>
                </div>
            </div>
        </div>
        <div class="hud-item">
            <div class="circle" style="--value:100; --color:#ff66ff;">
                <div class="circle-content">
                    <img src="assets/img/sono.png" alt="Sono">
                    <span>100%</span>
                </div>
            </div>
        </div>
    </div>

    <div class="player-info">
        <div class="player-item" id="player-name">
            <i class="fas fa-user" style="color: #FFFFFF;"></i>
            <span class="value" id="nick">Luke Skywalker</span>
        </div>
        <div class="player-item" id="player-cash">
            <i class="fas fa-wallet" style="color: #FFFFFF;"></i>
            <span class="value" id="money">R$ 15.000</span>
        </div>
		<div class="player-item" id="player-id">
            <i class="fas fa-barcode" style="color: #f0f8ff;"></i>
            <span class="value" id="player-id">ID: 001</span>
        </div>
    </div>
    <div class="info">
		<span id="hora"></span>
        <span>Versão: 0.1.1</span>
    </div>

<script>
    // Função para definir o texto de um elemento por ID
    function updateText(elementId, value) {
        const el = document.getElementById(elementId);
        if (el) el.textContent = value; 
    }

    // Função para atualizar o círculo (mantida)
    function updateCircle(containerId, percentValue) {
        const item = document.getElementById(containerId);
        if (item) {
            const circle = item.querySelector('.circle');
            if (circle) {
                const value = Math.max(0, Math.min(100, percentValue));
                circle.style.setProperty('--value', value);
            }
        }
    }

    // Função para formatar o dinheiro (R$)
    function formatCash(cash) {
        // Assume que 'cash' é um número
        const num = Number(cash);
        return num.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL', minimumFractionDigits: 0, maximumFractionDigits: 0 });
    }

    // Relógio (mantido)
    function atualizarHora() {
        const agora = new Date();
        const hora = String(agora.getHours()).padStart(2, '0');
        const minuto = String(agora.getMinutes()).padStart(2, '0');
        const segundo = String(agora.getSeconds()).padStart(2, '0');
        updateText('hora', `${hora}:${minuto}:${segundo}`);
    }
    setInterval(atualizarHora, 1000);
    atualizarHora();

    // 1. EVENTO CEF PARA DINHEIRO (pwd:money)
    // Atualiza apenas o dinheiro
    cef.on('pwd:money', (money) => {
        // O valor do dinheiro deve ser o valor recebido, formatado.
        updateText('money', formatCash(money)); 
    });

    // 2. EVENTO CEF PARA NICK (pwd:nick)
    // Atualiza apenas o nome
    cef.on('pwd:nick', (nick) => {
        updateText('nick', nick);
    });
    
    // 3. NOVO EVENTO CEF PARA ATUALIZAR O ID (Você precisará deste evento)
    // Se o seu script do servidor envia o ID separadamente:
    cef.on('pwd:id', (id) => {
        updateText('player-id', `ID: ${id}`);
    });
    
    // 4. EVENTO CEF DE ATUALIZAÇÃO GERAL (pwd:allitem)
    // Adicionei os parâmetros 'id' e 'nick' no evento, assumindo que eles são enviados.
    // **A ordem dos parâmetros é crucial e deve corresponder ao seu script do servidor!**
    cef.on('pwd:allitem', (money, nick, id, hp, armours) => {
	
		// Atualiza Dinheiro (se o valor for válido)
        if (money !== undefined && money >= 0) {
            updateText('money', formatCash(money));
        }
        
        // Atualiza Nome (se o valor for válido)
        if (nick !== undefined && nick !== "") {
            updateText('nick', nick);
        }
        
        // Atualiza ID (se o valor for válido)
        if (id !== undefined && id >= 0) {
            updateText('player-id', `ID: ${id}`);
        }
        
        // Atualiza a Vida e Colete (círculos)
        updateCircle("hud-vida", hp);
        updateText("vidap", `${hp}%`); 

        updateCircle("hud-colete", armours);
        updateText("coletep", `${armours}%`);
    });
    
    // Chamada inicial para garantir que o ID tenha um valor de placeholder
    updateText('player-id', `ID: 001`); 

</script>
</body>

</html>
